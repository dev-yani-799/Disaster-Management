{% extends 'index.html' %} {% block content %}

<div class="w-[800px] mx-auto bg-white p-8 mt-8">
  <h1 class="text-center font-bold tracking-widest text-xl">
    STATE COMMITTEE REGISTER
  </h1>
  {% for message in messages %}
  <p class="text-xs ml-[120px] text-red-500">{{message}}</p>
  {% endfor %}
  <form
  onsubmit="return validate()"
    class="w-full flex flex-wrap gap-4 justify-center mt-10"
    method="POST"
    action=""
  >
    {% csrf_token %}
    <input
    required
      class="border rounded-lg w-[500px] h-12 outline-none px-4 mb-2 drop-shadow border']"
      name="name"
      type="text"
      placeholder="Name"
    />
    <input
    required
      class="border rounded-lg w-[500px] h-12 outline-none px-4 mb-2 drop-shadow border']"
      name="number"
      id="phonenumber"
      type="number"
      placeholder="Contact Number"
    />
    <div class="border rounded-lg drop-shadow h-12">
      <input
        type="hidden" name="latitude" id="lat" value="" />
      <input
        type="hidden" name="longitude" id="lng" value="" />
      <input
        type="hidden" name="usertype" value="1" />
      <select
        name="state"
        class="opacity-50 px-4 w-[500px] h-12 outline-none mb-2 bg-slate-50 rounded-lg"
        id="state"
      >
        <option disabled selected value="0">select state</option>
        {% for state in states %}
        <option value="{{state.id}}">{{state.name}}</option>
        {% endfor %}
      </select>
    </div>

    <!-- <input
      required class="border rounded-lg w-[500px] h-12 outline-none px-4 mb-2 drop-shadow border']" name="state" type="text" placeholder="State"> -->
    <input
    required
      class="border rounded-lg w-[500px] h-12 outline-none px-4 mb-2 drop-shadow border']"
      name="email"
      type="email"
      placeholder="Email"
    />
    <input
    required
      class="border rounded-lg w-[500px] h-12 outline-none px-4 mb-2 drop-shadow border']"
      name="location"
      type="text"
      placeholder="Location"
    />
    <input
    required
      class="border rounded-lg w-[500px] h-12 outline-none px-4 mb-2 drop-shadow border']"
      name="password"
      type="password"
      id="password"
      placeholder="Password"
    />
    <input
    required
      class="border rounded-lg w-[500px] h-10 outline-none px-4 bg-gray-600 text-white font-medium cursor-pointer hover:bg-gray-600/80"
      type="submit"
      value="REGISTER"
    />
    <p class="text-black opacity-70 mt-2">
      Already have an Account ?<span
        ><a
          class="text-gray-500 ml-2 hover:text-gray-600 font-semibold"
          href="{% url 'login' %}"
          >Login</a
        ></span
      >
    </p>
  </form>
</div>

<script>
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    } else {
      x.innerHTML = "Geolocation is not supported by this browser.";
    }
  }

  function showPosition(position) {
    lat = document.getElementById("lat");
    lng = document.getElementById("lng");
    lat.value = position.coords.latitude;
    lng.value = position.coords.longitude;
  }

  function validate(){
    let phone = document.getElementById('phonenumber').value
    let password = document.getElementById('password').value

        if(phone.length<10){
            alert('Enter Valid Phone Number')
            return false
        }
        if(password.length<6){
            alert('Password Should be 6 characters minimum')
            return false
        }

        return true
  }
  getLocation();
</script>

{% endblock content %}
